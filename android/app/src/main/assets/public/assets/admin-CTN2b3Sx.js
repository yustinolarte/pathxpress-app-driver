import{c as S,r as n,j as e,f as W,b as ce,h as oe,R as B,P as Q,T as P,L as xe,d as X,e as he,X as $,M as _,F as me,i as ue,a as pe,C as be,l as we,m as fe}from"./globals-CnGa4aqp.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ge=S("dollar-sign",je);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ve=S("eye-off",Ne);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],K=S("eye",ye);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Z=S("image",De);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ke=S("layout-dashboard",Se);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ee=S("loader-circle",Ce);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ie=S("plus",Re);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Y=S("search",Ae);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Le=S("square-pen",Pe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],$e=S("trash-2",Te);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ve=S("upload",_e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Oe=S("user-plus",Me);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ee=S("users",qe),Ue="https://pathxpress-app-driver.vercel.app/api";class Fe{token=null;constructor(){this.token=localStorage.getItem("admin_token")}async request(i,d={}){const p={"Content-Type":"application/json",...d.headers};this.token&&(p.Authorization=`Bearer ${this.token}`);const h=await fetch(`${Ue}/admin${i}`,{...d,headers:p});if(!h.ok){const b=await h.json().catch(()=>({error:"Request failed"}));throw new Error(b.error||"Request failed")}return h.json()}async login(i,d){const p=await this.request("/login",{method:"POST",body:JSON.stringify({username:i,password:d})});return this.token=p.token,localStorage.setItem("admin_token",p.token),p}logout(){this.token=null,localStorage.removeItem("admin_token")}isAuthenticated(){return!!this.token}async getDashboard(){return this.request("/dashboard")}async getDrivers(i){const d=i?"?"+new URLSearchParams(i).toString():"";return this.request(`/drivers${d}`)}async getDriver(i){return this.request(`/drivers/${i}`)}async createDriver(i){return this.request("/drivers",{method:"POST",body:JSON.stringify(i)})}async updateDriver(i,d){return this.request(`/drivers/${i}`,{method:"PUT",body:JSON.stringify(d)})}async deleteDriver(i){return this.request(`/drivers/${i}`,{method:"DELETE"})}async getRoutes(i){const d=i?"?"+new URLSearchParams(i).toString():"";return this.request(`/routes${d}`)}async getRouteDetails(i){return this.request(`/routes/${i}`)}async createRoute(i){return this.request("/routes",{method:"POST",body:JSON.stringify(i)})}async updateRouteStatus(i,d){return this.request(`/routes/${i}/status`,{method:"PUT",body:JSON.stringify({status:d})})}async getDeliveries(i){const d=i?"?"+new URLSearchParams(i).toString():"";return this.request(`/deliveries${d}`)}async getReports(i){const d=i?"?"+new URLSearchParams(i).toString():"";return this.request(`/reports${d}`)}async updateReportStatus(i,d){return this.request(`/reports/${i}/status`,{method:"PUT",body:JSON.stringify({status:d})})}}const N=new Fe;function ze({onLogin:c}){const[i,d]=n.useState(""),[p,h]=n.useState(""),[b,r]=n.useState(!1),[w,f]=n.useState(""),[g,o]=n.useState(!1),j=async x=>{x.preventDefault(),f(""),o(!0);try{await N.login(i,p),c()}catch(a){f(a.message||"Login failed")}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-4",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[#e10600]/10 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-[#e10600]/5 rounded-full blur-[120px]"})]}),e.jsxs("div",{className:"relative w-full max-w-md animate-fadeIn",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-[#e10600] to-[#ff4d4d] shadow-lg shadow-[#e10600]/20 mb-4",children:e.jsx(W,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"PathXpress"}),e.jsx("p",{className:"text-white/50",children:"Admin Panel"})]}),e.jsxs("form",{onSubmit:j,className:"bg-[#16161f]/80 backdrop-blur-xl border border-white/5 rounded-2xl p-8 shadow-2xl",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6 text-center",children:"Welcome Back"}),w&&e.jsx("div",{className:"mb-4 p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-sm text-center",children:w}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Username"}),e.jsx("input",{type:"text",value:i,onChange:x=>d(x.target.value),placeholder:"Enter username",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b?"text":"password",value:p,onChange:x=>h(x.target.value),placeholder:"Enter password",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 pr-12 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors",required:!0}),e.jsx("button",{type:"button",onClick:()=>r(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/40 hover:text-white/70 transition-colors",children:b?e.jsx(ve,{className:"w-5 h-5"}):e.jsx(K,{className:"w-5 h-5"})})]})]})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full mt-6 bg-gradient-to-r from-[#e10600] to-[#ff4d4d] text-white font-semibold py-3 px-4 rounded-xl hover:shadow-lg hover:shadow-[#e10600]/20 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-5 h-5 animate-spin"}),"Signing in..."]}):"Sign In"})]}),e.jsx("p",{className:"text-center text-white/30 text-sm mt-6",children:"Â© 2024 PathXpress. All rights reserved."})]})]})}const Ge=[{id:"dashboard",label:"Dashboard",icon:ke},{id:"drivers",label:"Drivers",icon:ee},{id:"routes",label:"Routes",icon:B},{id:"deliveries",label:"Deliveries",icon:Q},{id:"reports",label:"Reports",icon:P}];function Xe({currentView:c,onNavigate:i,collapsed:d,onToggleCollapse:p,onLogout:h}){return e.jsxs("aside",{className:"fixed left-0 top-0 h-full bg-[#111118] border-r border-white/5 transition-all duration-300 z-50 flex flex-col",style:{width:d?"80px":"260px"},children:[e.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-white/5",children:e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:"w-10 h-10 min-w-[40px] rounded-xl bg-gradient-to-br from-[#e10600] to-[#ff4d4d] flex items-center justify-center shadow-lg shadow-[#e10600]/20",children:e.jsx(W,{className:"w-5 h-5 text-white"})}),!d&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsx("h1",{className:"text-white font-bold text-sm whitespace-nowrap",children:"PathXpress"}),e.jsx("p",{className:"text-white/40 text-xs",children:"Admin Panel"})]})]})}),e.jsx("button",{onClick:p,className:"absolute -right-3 top-20 w-6 h-6 rounded-full bg-[#16161f] border border-white/10 flex items-center justify-center text-white/50 hover:text-white hover:border-[#e10600]/50 transition-all z-10",children:d?e.jsx(ce,{className:"w-3 h-3"}):e.jsx(oe,{className:"w-3 h-3"})}),e.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:Ge.map(b=>{const r=b.icon,w=c===b.id;return e.jsxs("button",{onClick:()=>i(b.id),className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl transition-all duration-200 group ${w?"bg-gradient-to-r from-[#e10600]/20 to-transparent text-white":"text-white/50 hover:text-white hover:bg-white/5"}`,title:d?b.label:void 0,children:[e.jsx("div",{className:`w-9 h-9 min-w-[36px] rounded-lg flex items-center justify-center transition-all ${w?"bg-[#e10600] text-white shadow-lg shadow-[#e10600]/30":"bg-white/5 group-hover:bg-white/10"}`,children:e.jsx(r,{className:"w-5 h-5"})}),!d&&e.jsx("span",{className:"font-medium text-sm whitespace-nowrap",children:b.label}),w&&!d&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-[#e10600]"})]},b.id)})}),e.jsxs("div",{className:"p-3 border-t border-white/5",children:[!d&&e.jsx("div",{className:"bg-white/5 rounded-xl p-3 mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#e10600] to-[#ff4d4d] flex items-center justify-center text-white font-bold text-sm",children:"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white text-sm font-medium truncate",children:"Admin"}),e.jsx("p",{className:"text-white/40 text-xs",children:"Super Admin"})]})]})}),e.jsxs("button",{onClick:h,className:`w-full flex items-center gap-3 px-3 py-3 rounded-xl text-white/50 hover:text-red-400 hover:bg-red-500/10 transition-all ${d?"justify-center":""}`,title:"Logout",children:[e.jsx(xe,{className:"w-5 h-5"}),!d&&e.jsx("span",{className:"text-sm",children:"Logout"})]})]})]})}function H(){const[c,i]=n.useState(null),[d,p]=n.useState(!0);n.useEffect(()=>{h()},[]);const h=async()=>{try{const r=await N.getDashboard();i(r)}catch(r){console.error("Failed to load dashboard:",r)}finally{p(!1)}};if(d)return e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 w-48 bg-white/5 rounded-lg"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(r=>e.jsx("div",{className:"h-32 bg-white/5 rounded-2xl"},r))})]});const b=[{title:"Active Drivers",value:c?.drivers.active||0,subtitle:`${c?.drivers.total||0} total`,icon:ee,color:"from-emerald-500 to-emerald-600",bgColor:"bg-emerald-500/10",iconColor:"text-emerald-400"},{title:"Today's Routes",value:c?.routes.today||0,subtitle:`${c?.routes.total||0} total`,icon:B,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-500/10",iconColor:"text-blue-400"},{title:"Delivered Today",value:c?.deliveries.delivered||0,subtitle:`${c?.deliveries.today||0} assigned`,icon:Q,color:"from-[#e10600] to-[#ff4d4d]",bgColor:"bg-[#e10600]/10",iconColor:"text-[#e10600]"},{title:"COD Collected",value:`AED ${(c?.cod.collectedToday||0).toLocaleString()}`,subtitle:"Today's collection",icon:ge,color:"from-amber-500 to-amber-600",bgColor:"bg-amber-500/10",iconColor:"text-amber-400"}];return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-white/50 mt-1",children:"Welcome back, Admin"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-white/40 text-sm",children:[e.jsx(X,{className:"w-4 h-4"}),new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:b.map((r,w)=>{const f=r.icon;return e.jsxs("div",{className:"bg-[#16161f]/80 backdrop-blur-sm border border-white/5 rounded-2xl p-5 hover:border-white/10 transition-all duration-300 card-hover",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${r.bgColor} flex items-center justify-center`,children:e.jsx(f,{className:`w-6 h-6 ${r.iconColor}`})}),e.jsxs("div",{className:"flex items-center gap-1 text-emerald-400 text-sm",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"+12%"})]})]}),e.jsx("p",{className:"text-white/40 text-sm mb-1",children:r.title}),e.jsx("p",{className:"text-white text-2xl font-bold mb-1",children:r.value}),e.jsx("p",{className:"text-white/30 text-xs",children:r.subtitle})]},w)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-[#16161f]/80 backdrop-blur-sm border border-white/5 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Delivery Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-white/70 text-sm",children:"Delivered"})]}),e.jsx("span",{className:"text-white font-semibold",children:c?.deliveries.delivered||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-white/70 text-sm",children:"Attempted"})]}),e.jsx("span",{className:"text-white font-semibold",children:c?.deliveries.attempted||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-white/70 text-sm",children:"Pending"})]}),e.jsx("span",{className:"text-white font-semibold",children:c?.deliveries.pending||0})]})]})]}),e.jsxs("div",{className:"bg-[#16161f]/80 backdrop-blur-sm border border-white/5 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Pending Reports"}),e.jsx("div",{className:`w-10 h-10 rounded-xl ${c?.reports.pending?"bg-red-500/20":"bg-emerald-500/20"} flex items-center justify-center`,children:e.jsx(P,{className:`w-5 h-5 ${c?.reports.pending?"text-red-400":"text-emerald-400"}`})})]}),e.jsx("p",{className:"text-4xl font-bold text-white mb-2",children:c?.reports.pending||0}),e.jsx("p",{className:"text-white/40 text-sm",children:c?.reports.pending?"Reports need attention":"All reports resolved"})]}),e.jsxs("div",{className:"bg-[#16161f]/80 backdrop-blur-sm border border-white/5 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"System Overview"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-white/50",children:"Total Drivers"}),e.jsx("span",{className:"text-white",children:c?.drivers.total||0})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-white/50",children:"Total Routes"}),e.jsx("span",{className:"text-white",children:c?.routes.total||0})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-white/50",children:"Total Deliveries"}),e.jsx("span",{className:"text-white",children:c?.deliveries.total||0})]})]})]})]})]})}function Je(){const[c,i]=n.useState([]),[d,p]=n.useState(!0),[h,b]=n.useState(""),[r,w]=n.useState(""),[f,g]=n.useState(!1),[o,j]=n.useState(null),[x,a]=n.useState({username:"",password:"",fullName:"",email:"",phone:"",vehicleNumber:"",emiratesId:"",licenseNo:"",status:"ACTIVE"});n.useEffect(()=>{m()},[r]);const m=async()=>{try{p(!0);const s=await N.getDrivers({status:r||void 0,search:h||void 0});i(s)}catch(s){console.error("Failed to load drivers:",s)}finally{p(!1)}},l=()=>{m()},k=()=>{j(null),a({username:"",password:"",fullName:"",email:"",phone:"",vehicleNumber:"",emiratesId:"",licenseNo:"",status:"ACTIVE"}),g(!0)},T=s=>{j(s),a({username:s.username,password:"",fullName:s.fullName,email:s.email||"",phone:s.phone||"",vehicleNumber:s.vehicleNumber||"",emiratesId:s.emiratesId||"",licenseNo:s.licenseNo||"",status:s.status}),g(!0)},[D,R]=n.useState(!1),V=async s=>{s.preventDefault(),R(!0);try{if(console.log("Submitting driver:",x),o)await N.updateDriver(o.id,x);else{const v=await N.createDriver(x);console.log("Driver created:",v)}g(!1),m()}catch(v){console.error("Error creating driver:",v),alert(v.message||"Failed to create driver")}finally{R(!1)}},M=async s=>{if(confirm("Are you sure you want to delete this driver?"))try{await N.deleteDriver(s),m()}catch(v){alert(v.message)}},O=s=>{switch(s){case"ACTIVE":return"bg-emerald-500/20 text-emerald-400";case"INACTIVE":return"bg-gray-500/20 text-gray-400";case"SUSPENDED":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}};return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Drivers"}),e.jsx("p",{className:"text-white/50 mt-1",children:"Manage your driver accounts"})]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 bg-gradient-to-r from-[#e10600] to-[#ff4d4d] text-white font-medium py-2.5 px-5 rounded-xl hover:shadow-lg hover:shadow-[#e10600]/20 transition-all",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Add Driver"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Y,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/30"}),e.jsx("input",{type:"text",value:h,onChange:s=>b(s.target.value),onKeyPress:s=>s.key==="Enter"&&l(),placeholder:"Search by name, username, or phone...",className:"w-full bg-[#16161f] border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors"})]}),e.jsxs("select",{value:r,onChange:s=>w(s.target.value),className:"bg-[#16161f] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e10600]/50 transition-colors min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"})]})]}),e.jsx("div",{className:"bg-[#16161f]/80 backdrop-blur-sm border border-white/5 rounded-2xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Driver"}),e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Contact"}),e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Vehicle"}),e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Status"}),e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Routes"}),e.jsx("th",{className:"text-right text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Actions"})]})}),e.jsx("tbody",{children:d?Array.from({length:5}).map((s,v)=>e.jsx("tr",{className:"border-b border-white/5",children:Array.from({length:6}).map((q,U)=>e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-white/5 rounded animate-pulse"})},U))},v)):c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-12 text-white/40",children:"No drivers found"})}):c.map(s=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#e10600] to-[#ff4d4d] flex items-center justify-center text-white font-bold text-sm",children:s.fullName.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.fullName}),e.jsxs("p",{className:"text-white/40 text-sm",children:["@",s.username]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-white text-sm",children:s.phone||"-"}),e.jsx("p",{className:"text-white/40 text-sm",children:s.email||"-"})]}),e.jsx("td",{className:"px-6 py-4 text-white text-sm",children:s.vehicleNumber||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${O(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-white text-sm",children:s._count?.routes||0}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>T(s),className:"w-8 h-8 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>M(s.id),className:"w-8 h-8 rounded-lg bg-white/5 hover:bg-red-500/20 flex items-center justify-center text-white/60 hover:text-red-400 transition-colors",children:e.jsx($e,{className:"w-4 h-4"})})]})})]},s.id))})]})})}),f&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>g(!1)}),e.jsxs("div",{className:"relative w-full max-w-lg bg-[#16161f] border border-white/10 rounded-2xl shadow-2xl animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:o?"Edit Driver":"Add New Driver"}),e.jsx("button",{onClick:()=>g(!1),className:"w-9 h-9 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:V,className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Username *"}),e.jsx("input",{type:"text",value:x.username,onChange:s=>a({...x,username:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors",required:!0,disabled:!!o})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white/60 text-sm mb-2",children:["Password ",!o&&"*"]}),e.jsx("input",{type:"password",value:x.password,onChange:s=>a({...x,password:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors",required:!o,placeholder:o?"Leave blank to keep":""})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:x.fullName,onChange:s=>a({...x,fullName:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Email"}),e.jsx("input",{type:"email",value:x.email,onChange:s=>a({...x,email:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:x.phone,onChange:s=>a({...x,phone:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors",placeholder:"+971..."})]})]}),e.jsxs("div",{className:"border-t border-white/5 pt-4 mt-4",children:[e.jsx("p",{className:"text-white/40 text-xs mb-3 uppercase tracking-wider",children:"Documents & Vehicle"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Emirates ID"}),e.jsx("input",{type:"text",value:x.emiratesId,onChange:s=>a({...x,emiratesId:s.target.value}),placeholder:"784-XXXX-XXXXXXX-X",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"License Number"}),e.jsx("input",{type:"text",value:x.licenseNo,onChange:s=>a({...x,licenseNo:s.target.value}),placeholder:"License #",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Vehicle/Plate Number"}),e.jsx("input",{type:"text",value:x.vehicleNumber,onChange:s=>a({...x,vehicleNumber:s.target.value}),placeholder:"A 12345 Dubai",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Status"}),e.jsxs("select",{value:x.status,onChange:s=>a({...x,status:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e10600]/50 transition-colors",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"INACTIVE",children:"Inactive"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-5 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white/80 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:D,className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-[#e10600] to-[#ff4d4d] text-white font-medium hover:shadow-lg hover:shadow-[#e10600]/20 transition-all disabled:opacity-50",children:D?"Creating...":o?"Save Changes":"Create Driver"})]})]})]})]})]})}function He(){const[c,i]=n.useState([]),[d,p]=n.useState([]),[h,b]=n.useState(!0),[r,w]=n.useState(""),[f,g]=n.useState(""),[o,j]=n.useState(!1),[x,a]=n.useState(!1),[m,l]=n.useState(null),[k,T]=n.useState(!1),[D,R]=n.useState([]),[V,M]=n.useState(!1),O=n.useRef(null),[s,v]=n.useState({id:"",date:new Date().toISOString().split("T")[0],zone:"",vehicleInfo:""});n.useEffect(()=>{q()},[r,f]);const q=async()=>{try{b(!0);const[t,u]=await Promise.all([N.getRoutes({status:r||void 0,date:f||void 0}),N.getDrivers({status:"ACTIVE"})]);console.log("Routes loaded:",t),i(t),p(u)}catch(t){console.error("Failed to load routes:",t)}finally{b(!1)}},U=async t=>{t.preventDefault(),M(!0);try{await N.createRoute({...s,deliveries:D}),j(!1),R([]),q()}catch(u){alert(u.message)}finally{M(!1)}},te=t=>{const u=t.target.files?.[0];if(!u)return;const L=new FileReader;L.onload=F=>{const C=(F.target?.result).split(`
`).filter(I=>I.trim());if(C.length<2){alert("CSV must have a header row and at least one data row");return}const z=C[0].split(",").map(I=>I.trim().toLowerCase()),G=[];for(let I=1;I<C.length;I++){const ne=C[I].split(",").map(y=>y.trim()),E={};z.forEach((y,de)=>{const A=ne[de]||"";y.includes("customer")&&y.includes("name")?E.customerName=A:y.includes("phone")||y.includes("mobile")?E.customerPhone=A:y.includes("address")?E.address=A:y.includes("ref")||y.includes("awb")||y.includes("tracking")?E.packageRef=A:y.includes("type")?E.type=A.toUpperCase()==="COD"?"COD":"PREPAID":y.includes("cod")||y.includes("amount")?E.codAmount=parseFloat(A)||0:y.includes("weight")&&(E.weight=A)}),E.customerName&&E.address&&G.push(E)}R(G),alert(`Loaded ${G.length} deliveries from CSV`)},L.readAsText(u)},se=async(t,u)=>{try{await N.updateRouteStatus(t,u),q()}catch(L){alert(L.message)}},re=async t=>{T(!0),a(!0);try{const u=await N.getRouteDetails(t);l(u)}catch(u){alert("Failed to load route details: "+u.message),a(!1)}finally{T(!1)}},ae=t=>{switch(t){case"DELIVERED":return"bg-emerald-500/20 text-emerald-400";case"ATTEMPTED":return"bg-amber-500/20 text-amber-400";case"RETURNED":return"bg-red-500/20 text-red-400";case"IN_PROGRESS":return"bg-blue-500/20 text-blue-400";default:return"bg-gray-500/20 text-gray-400"}},le=t=>{switch(t){case"PENDING":return"bg-amber-500/20 text-amber-400";case"IN_PROGRESS":return"bg-blue-500/20 text-blue-400";case"COMPLETED":return"bg-emerald-500/20 text-emerald-400";case"CANCELLED":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},ie=(t=[])=>{const u=t.length,L=t.filter(C=>C.status==="DELIVERED").length,F=t.filter(C=>C.status==="PENDING").length,J=t.reduce((C,z)=>C+(z.codAmount||0),0);return{total:u,delivered:L,pending:F,cod:J}};return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Routes"}),e.jsx("p",{className:"text-white/50 mt-1",children:"Manage delivery routes"})]}),e.jsxs("button",{onClick:()=>{v({id:`R-${Date.now()}`,date:new Date().toISOString().split("T")[0],zone:"",vehicleInfo:""}),j(!0)},className:"flex items-center gap-2 bg-gradient-to-r from-[#e10600] to-[#ff4d4d] text-white font-medium py-2.5 px-5 rounded-xl hover:shadow-lg hover:shadow-[#e10600]/20 transition-all",children:[e.jsx(Ie,{className:"w-5 h-5"}),"Create Route"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("input",{type:"date",value:f,onChange:t=>g(t.target.value),className:"bg-[#16161f] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e10600]/50 transition-colors"}),e.jsxs("select",{value:r,onChange:t=>w(t.target.value),className:"bg-[#16161f] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e10600]/50 transition-colors min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h?Array.from({length:6}).map((t,u)=>e.jsx("div",{className:"h-48 bg-white/5 rounded-2xl animate-pulse"},u)):c.length===0?e.jsx("div",{className:"col-span-full text-center py-12 text-white/40",children:"No routes found"}):c.map(t=>{const u=ie(t.deliveries);return e.jsxs("div",{onClick:()=>re(t.id),className:"bg-[#16161f]/80 backdrop-blur-sm border border-white/5 rounded-2xl p-5 hover:border-white/10 hover:bg-[#16161f] transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:t.id}),e.jsx("p",{className:"text-white/40 text-sm mt-1",children:new Date(t.date).toLocaleDateString()})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${le(t.status)}`,children:t.status.replace("_"," ")})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white/60 text-sm",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center",children:t.driver?.fullName?.charAt(0)||"?"}),e.jsx("span",{children:t.driver?.fullName||"Unassigned"})]}),t.zone&&e.jsxs("div",{className:"flex items-center gap-2 text-white/40 text-sm",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:t.zone})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white font-semibold",children:u.total}),e.jsx("p",{className:"text-white/40 text-xs",children:"Stops"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-emerald-400 font-semibold",children:u.delivered}),e.jsx("p",{className:"text-white/40 text-xs",children:"Done"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-amber-400 font-semibold",children:u.pending}),e.jsx("p",{className:"text-white/40 text-xs",children:"Left"})]})]}),t.status==="PENDING"&&e.jsx("button",{onClick:()=>se(t.id,"CANCELLED"),className:"text-red-400/60 hover:text-red-400 text-xs transition-colors",children:"Cancel"})]})]},t.id)})}),o&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>j(!1)}),e.jsxs("div",{className:"relative w-full max-w-lg bg-[#16161f] border border-white/10 rounded-2xl shadow-2xl animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Create Route"}),e.jsx("button",{onClick:()=>j(!1),className:"w-9 h-9 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:U,className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Route ID"}),e.jsx("input",{type:"text",value:s.id,onChange:t=>v({...s,id:t.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e10600]/50 transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Date"}),e.jsx("input",{type:"date",value:s.date,onChange:t=>v({...s,date:t.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e10600]/50 transition-colors",required:!0})]})]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[e.jsx("p",{className:"text-blue-400 text-sm font-medium",children:"ðŸ“± Driver Assignment"}),e.jsx("p",{className:"text-white/50 text-xs mt-1",children:"The route will be assigned to the first driver who scans it in the app."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Zone"}),e.jsx("input",{type:"text",value:s.zone,onChange:t=>v({...s,zone:t.target.value}),placeholder:"e.g. Dubai Marina",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/60 text-sm mb-2",children:"Vehicle Info"}),e.jsx("input",{type:"text",value:s.vehicleInfo,onChange:t=>v({...s,vehicleInfo:t.target.value}),placeholder:"e.g. Van - White",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-white/60 text-sm",children:"Deliveries (Upload CSV)"}),e.jsx("input",{type:"file",ref:O,accept:".csv",onChange:te,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>O.current?.click(),className:"w-full flex items-center justify-center gap-2 bg-white/5 border border-white/10 border-dashed rounded-xl px-4 py-4 text-white/60 hover:bg-white/10 hover:border-white/20 transition-colors",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Upload CSV with deliveries"})]}),D.length>0&&e.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("span",{className:"text-emerald-400 text-sm font-medium",children:[D.length," deliveries loaded"]})]}),e.jsx("button",{type:"button",onClick:()=>R([]),className:"text-white/40 hover:text-white/60 text-xs",children:"Clear"})]}),e.jsxs("div",{className:"mt-2 max-h-24 overflow-y-auto",children:[D.slice(0,3).map((t,u)=>e.jsxs("p",{className:"text-white/50 text-xs truncate",children:[u+1,". ",t.customerName," - ",t.address?.substring(0,30),"..."]},u)),D.length>3&&e.jsxs("p",{className:"text-white/40 text-xs",children:["... and ",D.length-3," more"]})]})]}),e.jsx("p",{className:"text-white/30 text-xs",children:"CSV columns: customer_name, phone, address, package_ref, type (COD/PREPAID), cod_amount"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{j(!1),R([])},className:"px-5 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white/80 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:V,className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-[#e10600] to-[#ff4d4d] text-white font-medium hover:shadow-lg hover:shadow-[#e10600]/20 transition-all disabled:opacity-50",children:V?"Creating...":`Create Route${D.length>0?` (${D.length} stops)`:""}`})]})]})]})]}),x&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>a(!1)}),e.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-[#16161f] border border-white/10 rounded-2xl shadow-2xl animate-fadeIn overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:k?"Loading...":m?.id}),m&&e.jsxs("p",{className:"text-white/50 text-sm mt-1",children:[new Date(m.date).toLocaleDateString()," â€¢ ",m.zone||"No zone"]})]}),e.jsx("button",{onClick:()=>a(!1),className:"w-9 h-9 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:e.jsx($,{className:"w-5 h-5"})})]}),k?e.jsx("div",{className:"p-10 text-center text-white/50",children:"Loading route details..."}):m&&e.jsxs("div",{className:"p-5 overflow-y-auto max-h-[calc(90vh-100px)]",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:m.deliveries?.length||0}),e.jsx("p",{className:"text-white/50 text-sm",children:"Total Stops"})]}),e.jsxs("div",{className:"bg-emerald-500/10 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:m.deliveries?.filter(t=>t.status==="DELIVERED").length||0}),e.jsx("p",{className:"text-white/50 text-sm",children:"Delivered"})]}),e.jsxs("div",{className:"bg-amber-500/10 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-amber-400",children:m.deliveries?.filter(t=>t.status==="ATTEMPTED").length||0}),e.jsx("p",{className:"text-white/50 text-sm",children:"Attempted"})]}),e.jsxs("div",{className:"bg-blue-500/10 rounded-xl p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:["AED ",m.deliveries?.reduce((t,u)=>t+(u.codAmount||0),0).toFixed(0)]}),e.jsx("p",{className:"text-white/50 text-sm",children:"COD Total"})]})]}),m.driver&&e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"text-white/50 text-sm mb-2",children:"Assigned Driver"}),e.jsx("p",{className:"text-white font-medium",children:m.driver.fullName}),m.driver.phone&&e.jsx("p",{className:"text-white/50 text-sm",children:m.driver.phone})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-white font-medium",children:["Deliveries (",m.deliveries?.length||0,")"]}),m.deliveries?.map((t,u)=>e.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-white/60 text-sm font-medium",children:u+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:t.customerName}),e.jsx("p",{className:"text-white/40 text-sm",children:t.customerPhone||"No phone"})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ae(t.status)}`,children:t.status})]}),e.jsx("p",{className:"text-white/60 text-sm mb-3",children:t.address}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t.packageRef&&e.jsxs("span",{className:"text-white/40",children:["REF: ",t.packageRef]}),t.codAmount>0&&e.jsxs("span",{className:"text-amber-400",children:["COD: AED ",t.codAmount]})]}),t.deliveredAt&&e.jsx("span",{className:"text-white/40",children:new Date(t.deliveredAt).toLocaleTimeString()})]}),t.proofPhotoUrl&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5",children:[e.jsx("p",{className:"text-white/50 text-xs mb-2",children:"Proof of Delivery"}),e.jsx("img",{src:t.proofPhotoUrl,alt:"POD",className:"w-full max-w-xs rounded-lg cursor-pointer hover:opacity-80",onClick:()=>window.open(t.proofPhotoUrl,"_blank")})]}),t.notes&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5",children:[e.jsx("p",{className:"text-white/50 text-xs mb-1",children:"Notes"}),e.jsx("p",{className:"text-white/70 text-sm",children:t.notes})]})]},t.id)),(!m.deliveries||m.deliveries.length===0)&&e.jsx("div",{className:"text-center py-8 text-white/40",children:"No deliveries in this route"})]})]})]})]})]})}function We(){const[c,i]=n.useState([]),[d,p]=n.useState(!0),[h,b]=n.useState(""),[r,w]=n.useState(""),[f,g]=n.useState(""),[o,j]=n.useState(null);n.useEffect(()=>{x()},[h,r]);const x=async()=>{try{p(!0);const l={};h&&(l.status=h),r&&(l.date=r);const k=await N.getDeliveries(Object.keys(l).length>0?l:void 0);i(k)}catch(l){console.error("Failed to load deliveries:",l)}finally{p(!1)}},a=l=>{switch(l){case"DELIVERED":return"bg-emerald-500/20 text-emerald-400";case"PENDING":return"bg-blue-500/20 text-blue-400";case"IN_PROGRESS":return"bg-blue-500/20 text-blue-400";case"ATTEMPTED":return"bg-amber-500/20 text-amber-400";case"RETURNED":return"bg-purple-500/20 text-purple-400";case"CANCELLED":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},m=c.filter(l=>l.customerName.toLowerCase().includes(f.toLowerCase())||l.address.toLowerCase().includes(f.toLowerCase())||l.routeId.toLowerCase().includes(f.toLowerCase()));return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Deliveries"}),e.jsx("p",{className:"text-white/50 mt-1",children:"Track all deliveries and proof of delivery"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Y,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-white/30"}),e.jsx("input",{type:"text",value:f,onChange:l=>g(l.target.value),placeholder:"Search by customer, address, or route...",className:"w-full bg-[#16161f] border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white placeholder-white/30 focus:border-[#e10600]/50 transition-colors"})]}),e.jsx("input",{type:"date",value:r,onChange:l=>w(l.target.value),className:"bg-[#16161f] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e10600]/50 transition-colors"}),e.jsxs("select",{value:h,onChange:l=>b(l.target.value),className:"bg-[#16161f] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e10600]/50 transition-colors min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"DELIVERED",children:"Delivered"}),e.jsx("option",{value:"ATTEMPTED",children:"Attempted"}),e.jsx("option",{value:"RETURNED",children:"Returned"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total",value:c.length,color:"text-white"},{label:"Delivered",value:c.filter(l=>l.status==="DELIVERED").length,color:"text-emerald-400"},{label:"Pending",value:c.filter(l=>l.status==="PENDING").length,color:"text-blue-400"},{label:"Attempted",value:c.filter(l=>l.status==="ATTEMPTED").length,color:"text-amber-400"}].map((l,k)=>e.jsxs("div",{className:"bg-[#16161f]/80 border border-white/5 rounded-xl p-4 text-center",children:[e.jsx("p",{className:`text-2xl font-bold ${l.color}`,children:l.value}),e.jsx("p",{className:"text-white/40 text-sm",children:l.label})]},k))}),e.jsx("div",{className:"bg-[#16161f]/80 backdrop-blur-sm border border-white/5 rounded-2xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Customer"}),e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Route"}),e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Type"}),e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Amount"}),e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Status"}),e.jsx("th",{className:"text-left text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"POD"}),e.jsx("th",{className:"text-right text-white/40 text-xs font-medium uppercase tracking-wider px-6 py-4",children:"Actions"})]})}),e.jsx("tbody",{children:d?Array.from({length:5}).map((l,k)=>e.jsx("tr",{className:"border-b border-white/5",children:Array.from({length:7}).map((T,D)=>e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-white/5 rounded animate-pulse"})},D))},k)):m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-12 text-white/40",children:"No deliveries found"})}):m.map(l=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:l.customerName}),e.jsxs("p",{className:"text-white/40 text-sm flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),l.address.substring(0,30),"..."]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-white text-sm",children:l.routeId}),e.jsx("p",{className:"text-white/40 text-sm",children:l.route?.driver?.fullName||"-"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${l.type==="COD"?"bg-amber-500/20 text-amber-400":"bg-emerald-500/20 text-emerald-400"}`,children:l.type})}),e.jsx("td",{className:"px-6 py-4 text-white text-sm",children:l.codAmount>0?`AED ${l.codAmount}`:"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a(l.status)}`,children:l.status})}),e.jsx("td",{className:"px-6 py-4",children:l.proofPhotoUrl?e.jsx("button",{onClick:()=>j(l),className:"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center text-emerald-400 hover:bg-emerald-500/30 transition-colors",children:e.jsx(Z,{className:"w-5 h-5"})}):e.jsx("span",{className:"text-white/30 text-sm",children:"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{onClick:()=>j(l),className:"w-8 h-8 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:e.jsx(K,{className:"w-4 h-4"})})})})]},l.id))})]})})}),o&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>j(null)}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-[#16161f] border border-white/10 rounded-2xl shadow-2xl animate-fadeIn max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5 sticky top-0 bg-[#16161f]",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Delivery Details"}),e.jsx("button",{onClick:()=>j(null),className:"w-9 h-9 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${a(o.status)}`,children:o.status}),e.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium ${o.type==="COD"?"bg-amber-500/20 text-amber-400":"bg-emerald-500/20 text-emerald-400"}`,children:o.type})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 space-y-3",children:[e.jsx("h3",{className:"text-white/50 text-sm font-medium uppercase",children:"Customer"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#e10600] to-[#ff4d4d] flex items-center justify-center text-white font-bold",children:o.customerName.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:o.customerName}),o.customerPhone&&e.jsxs("p",{className:"text-white/40 text-sm flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"}),o.customerPhone]})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-white/60",children:[e.jsx(_,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:o.address})]})]}),o.codAmount>0&&e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4",children:[e.jsx("p",{className:"text-amber-400/60 text-sm",children:"COD Amount"}),e.jsxs("p",{className:"text-amber-400 text-2xl font-bold",children:["AED ",o.codAmount]})]}),o.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-white/50 text-sm font-medium uppercase mb-2",children:"Notes"}),e.jsx("p",{className:"text-white/80 bg-white/5 rounded-xl p-4",children:o.notes})]}),o.proofPhotoUrl&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-white/50 text-sm font-medium uppercase mb-2",children:"Proof of Delivery"}),e.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10",children:e.jsx("img",{src:o.proofPhotoUrl,alt:"POD",className:"w-full h-auto"})}),o.deliveredAt&&e.jsxs("p",{className:"text-white/40 text-sm mt-2",children:["Delivered: ",new Date(o.deliveredAt).toLocaleString()]})]})]})]})]})]})}function Be(){const[c,i]=n.useState([]),[d,p]=n.useState(!0),[h,b]=n.useState(""),[r,w]=n.useState(null);n.useEffect(()=>{f()},[h]);const f=async()=>{try{p(!0),console.log("Loading reports with filter:",h);const a=await N.getReports(h?{status:h}:void 0);console.log("Reports received:",a),i(a)}catch(a){console.error("Failed to load reports:",a)}finally{p(!1)}},g=async(a,m)=>{try{await N.updateReportStatus(a,m),f(),r?.id===a&&w(null)}catch(l){alert(l.message)}},o=a=>{switch(a){case"PENDING":return e.jsx(X,{className:"w-5 h-5 text-amber-400"});case"IN_REVIEW":return e.jsx(P,{className:"w-5 h-5 text-blue-400"});case"RESOLVED":return e.jsx(be,{className:"w-5 h-5 text-emerald-400"});case"REJECTED":return e.jsx(pe,{className:"w-5 h-5 text-red-400"});default:return e.jsx(X,{className:"w-5 h-5 text-gray-400"})}},j=a=>{switch(a){case"PENDING":return"bg-amber-500/20 text-amber-400 border-amber-500/30";case"IN_REVIEW":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"RESOLVED":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";case"REJECTED":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},x=a=>{switch(a.toLowerCase()){case"vehicle":return"from-blue-500 to-blue-600";case"accident":return"from-red-500 to-red-600";case"customer":return"from-amber-500 to-amber-600";case"package":return"from-purple-500 to-purple-600";default:return"from-gray-500 to-gray-600"}};return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reports"}),e.jsx("p",{className:"text-white/50 mt-1",children:"Manage driver issue reports"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-2",children:[e.jsx(P,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{className:"text-amber-400 font-semibold",children:c.filter(a=>a.status==="PENDING").length}),e.jsx("span",{className:"text-amber-400/60 text-sm",children:"pending"})]})})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("select",{value:h,onChange:a=>b(a.target.value),className:"bg-[#16161f] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#e10600]/50 transition-colors min-w-[150px]",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"IN_REVIEW",children:"In Review"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"REJECTED",children:"Rejected"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:d?Array.from({length:4}).map((a,m)=>e.jsx("div",{className:"h-40 bg-white/5 rounded-2xl animate-pulse"},m)):c.length===0?e.jsxs("div",{className:"col-span-full text-center py-12 text-white/40",children:[e.jsx(P,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No reports found"})]}):c.map(a=>e.jsxs("div",{className:`bg-[#16161f]/80 backdrop-blur-sm border rounded-2xl p-5 cursor-pointer hover:border-white/20 transition-all ${j(a.status)}`,onClick:()=>w(a),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${x(a.issueType)} flex items-center justify-center`,children:e.jsx(P,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold capitalize",children:a.issueType}),e.jsx("p",{className:"text-white/40 text-sm",children:new Date(a.createdAt).toLocaleDateString()})]})]}),o(a.status)]}),e.jsx("p",{className:"text-white/60 text-sm line-clamp-2 mb-4",children:a.description||"No description provided"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-white/10 flex items-center justify-center text-white text-xs font-medium",children:a.driver?.fullName?.charAt(0)||"?"}),e.jsx("span",{className:"text-white/50 text-sm",children:a.driver?.fullName||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.photoUrl&&e.jsx("div",{className:"w-7 h-7 rounded bg-white/10 flex items-center justify-center",children:e.jsx(Z,{className:"w-4 h-4 text-white/50"})}),a.latitude&&e.jsx("div",{className:"w-7 h-7 rounded bg-white/10 flex items-center justify-center",children:e.jsx(_,{className:"w-4 h-4 text-white/50"})})]})]})]},a.id))}),r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>w(null)}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-[#16161f] border border-white/10 rounded-2xl shadow-2xl animate-fadeIn max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5 sticky top-0 bg-[#16161f]",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Report Details"}),e.jsx("button",{onClick:()=>w(null),className:"w-9 h-9 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${x(r.issueType)} flex items-center justify-center`,children:e.jsx(P,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold text-lg capitalize",children:r.issueType}),e.jsx("p",{className:"text-white/40 text-sm",children:new Date(r.createdAt).toLocaleString()})]})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium border ${j(r.status)}`,children:r.status.replace("_"," ")})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[e.jsx("h3",{className:"text-white/50 text-sm font-medium uppercase mb-3",children:"Reported By"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#e10600] to-[#ff4d4d] flex items-center justify-center text-white font-bold",children:r.driver?.fullName?.charAt(0)||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:r.driver?.fullName||"Unknown"}),e.jsx("p",{className:"text-white/40 text-sm",children:r.driver?.phone||"No phone"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white/50 text-sm font-medium uppercase mb-2",children:"Description"}),e.jsx("p",{className:"text-white/80 bg-white/5 rounded-xl p-4",children:r.description||"No description provided"})]}),r.photoUrl&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-white/50 text-sm font-medium uppercase mb-2",children:"Photo Evidence"}),e.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10",children:e.jsx("img",{src:r.photoUrl,alt:"Report",className:"w-full h-auto"})})]}),r.latitude&&r.longitude&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-white/50 text-sm font-medium uppercase mb-2",children:"Location"}),e.jsxs("a",{href:`https://maps.google.com/?q=${r.latitude},${r.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-[#e10600] hover:underline",children:[e.jsx(_,{className:"w-4 h-4"}),"View on Google Maps"]})]}),r.status!=="RESOLVED"&&r.status!=="REJECTED"&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/5",children:[r.status==="PENDING"&&e.jsx("button",{onClick:()=>g(r.id,"IN_REVIEW"),className:"flex-1 py-3 rounded-xl bg-blue-500/20 text-blue-400 font-medium hover:bg-blue-500/30 transition-colors",children:"Mark In Review"}),e.jsx("button",{onClick:()=>g(r.id,"RESOLVED"),className:"flex-1 py-3 rounded-xl bg-emerald-500/20 text-emerald-400 font-medium hover:bg-emerald-500/30 transition-colors",children:"Resolve"}),e.jsx("button",{onClick:()=>g(r.id,"REJECTED"),className:"flex-1 py-3 rounded-xl bg-red-500/20 text-red-400 font-medium hover:bg-red-500/30 transition-colors",children:"Reject"})]})]})]})]})]})}function Qe(){const[c,i]=n.useState(N.isAuthenticated()),[d,p]=n.useState("dashboard"),[h,b]=n.useState(!1),r=()=>{i(!0)},w=()=>{N.logout(),i(!1)};if(!c)return e.jsx(ze,{onLogin:r});const f=()=>{switch(d){case"dashboard":return e.jsx(H,{});case"drivers":return e.jsx(Je,{});case"routes":return e.jsx(He,{});case"deliveries":return e.jsx(We,{});case"reports":return e.jsx(Be,{});default:return e.jsx(H,{})}};return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] flex",children:[e.jsx(Xe,{currentView:d,onNavigate:p,collapsed:h,onToggleCollapse:()=>b(!h),onLogout:w}),e.jsx("main",{className:"flex-1 transition-all duration-300",style:{marginLeft:h?"80px":"260px"},children:e.jsx("div",{className:"p-6 min-h-screen",children:f()})})]})}we.createRoot(document.getElementById("root")).render(e.jsx(fe.StrictMode,{children:e.jsx(Qe,{})}));
